[Display]
Title           = LD44
FullScreen      = true
Smoothing       = false
VSync           = true

[Resource]
Texture         = ../data/texture
Sound           = ../data/sound

[Config]
DefautParent    = Default

[Default]
KeepInCache     = true

[Input]
SetList         = MainInput
DefaultThreshold= 0.5

[MainInput]
MOUSE_LEFT      = Reset
KEY_ESCAPE      = Quit
KEY_BACKSPACE   = Quit # Reset # Menu
KEY_SPACE       = Reset # Menu
KEY_ENTER       = Reset # Menu
KEY_1           = 1PStart
KEY_NUMPAD_1    = 1PStart
JOY_A_1         = Reset # Menu
JOY_B_1         = Reset # Menu
JOY_X_1         = Reset # Menu
JOY_Y_1         = Reset # Menu

KEY_S           = SpeedUp
KEY_A           = MoveLeft
KEY_D           = MoveRight
KEY_Q           = RotateCCW
KEY_E           = RotateCW

KEY_DOWN        = SpeedUp
KEY_LEFT        = MoveLeft
KEY_RIGHT       = MoveRight
KEY_RSHIFT      = RotateCCW
KEY_RCTRL       = RotateCW

JOY_LEFT_1      = MoveLeft
-JOY_LX_1       = MoveLeft
JOY_RIGHT_1     = MoveRight
+JOY_LX_1       = MoveRight
JOY_DOWN_1      = SpeedUp
+JOY_LY_1       = SpeedUp
JOY_LBUMPER_1   = RotateCCW
JOY_RTRIGGER_1  = RotateCCW
JOY_RBUMPER_1   = RotateCW
JOY_LTRIGGER_1  = RotateCW

[Game]
ViewportList    = GameViewport1 # PreviewViewport1
InitialFallDelay= 0.5
FallDelayList   = 0.8 # 0.025
MoveDelayList   = 0.3 # 0.075
GridSize        = (10, 22)

[Runtime]
Score = 0

[MainViewport]
BackgroundColor = (20, 33, 15)
Camera          = MainCamera

[MainCamera]
FrustumWidth    = 1280
FrustumHeight   = 720
FrustumFar      = 2
FrustumNear     = 0

[GameViewport1]
BackgroundColor = (0, 0, 0)
BackgroundAlpha = 1
Size            = (320, 480)
Camera          = GameCamera1
Texture         = TextureP1

[GameCamera1]
GroupList       = Background # Tetro # UI
FrustumWidth    = 320
FrustumHeight   = 480
FrustumFar      = 2
FrustumNear     = 0
Position        = % > get Background Pivot, > / (320, 480, -2) 2, - < <

[PreviewViewport1]
BackgroundColor = (8, 8, 8)
Size            = (32, 32)
Position        = (32, 64)
Camera          = PreviewCamera1
Texture         = TextureP1

[PreviewCamera1]
GroupList       = Tetro
FrustumWidth    = 64
FrustumHeight   = 64
FrustumFar      = 100
FrustumNear     = 0
Position        = (80, 32, 1)

[Scene@@]
ChildList       = Play1 # Instance # GameMusic
TrackList       = @
0               = > Object.FindNext Menu, Object.SetLifeTime < 0

[Play1]
Graphic         = @
Pivot           = center
ParentCamera    = MainCamera
Texture         = TextureP1
UseParentSpace  = position
Scale           = 1.5

[Instance]
ChildList       = Background # Score

[Background]
Group           = Background
Graphic         = @
Texture         = background_01.png
Pivot           = (96, 64)

[PreloadBackground@Background]
LifeTime        = 0

[Score]
Group           = UI
ParentCamera    = GameCamera1
Position        = (-0.48, -0.48)
Pivot           = top left
Graphic         = @
Text            = @
Font            = font_gamegirl
String          = "SCORE: "
TrackList       = @
0               = > get Runtime Score, > Get Score String, Object.SetText ^ "<<"
Loop            = true

[Splash]
Graphic         = @
Pivot           = center
ParentCamera    = MainCamera
Scale           = 1
Text            = @
Font            = font_gamegirl
String          = LIFETRIS
FXList          = @
SlotList        = @
Type            = alpha
Curve           = smooth
StartValue      = -1
EndValue        = 0
StartTime       = 0
EndTime         = 3
TrackList       = @
5               = Input.SetValue Menu 1, Object.SetLifeTime ^ 0

[Menu]
Graphic         = @
Pivot           = center
Texture         = menu.png
ParentCamera    = MainCamera
Scale           = 1
Position        = (0, 0, 1)
ChildList       = MenuMusic # Prompt # PreloadBackground
TrackList       = @
0               = > Object.FindNext Splash, Object.SetLifeTime < 0

[Prompt]
Graphic         = @
Text            = @
String          = [1] OR [2] PLAYER(S)?
Font            = font_gamegirl
Pivot           = center left
ParentCamera    = MainCamera
UseParentSpace  = position
Position        = (0, -0.45)

[GameOver]
Group           = UI
Graphic         = @
Pivot           = center
ParentCamera    = GameCamera1
UseParentSpace  = position
Text            = @
Font            = font_gamegirl
String          = GAME OVER
Scale           = 2
FXList          = @
SlotList        = ScaleIn # ScaleWobble

[ScaleIn]
Type            = scale
Curve           = linear
StarValue       = 0.1
EndValue        = 1
StartTime       = 0
EndTime         = 0.15

[ScaleWobble]
Type            = scale
Curve           = sine
StartValue      = 1
EndValue        = 1.15
StartTime       = @ScaleIn.EndTime
EndTime         = % >> get ScaleWobble StartTime, + < 0.05

[LineClearTrack]
0               = Object.Create ClearSound  #
                > Get Runtime ClearedLines  #
                > * < 10                    #
                > Get Runtime Score         #
                > + < <                     #
                  Set Runtime Score <

[RotateTrack]
0               = Object.Create RotateSound

[MoveTrack]
0               = Object.Create MoveSound

[LandTrack]
0               = Object.Create LandSound   #
                > Get Runtime Score         #
                > + < 1                     #
                  Set Runtime Score <

@font_gamegirl.ini@
@sound.ini@
@tetro.ini@
@dev.ini@
